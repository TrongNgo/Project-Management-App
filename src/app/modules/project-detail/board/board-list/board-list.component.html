<!--
Kanban demo

https://community.devexpress.com/blogs/javascript/archive/2019/12/09/devextreme-new-drag-and-drop-utilities-v19-2.aspx

https://js.devexpress.com/Demos/WidgetsGallery/Demo/Sortable/Kanban/Angular/Light/

https://js.devexpress.com/Demos/WidgetsGallery/Demo/Scheduler/CustomDragAndDrop/Angular/Light/

-->

<div id="kanban">
    <div class="list-wrap">
        <dx-scroll-view class="scrollable-board"
                        direction="horizontal"
                        showScrollbar="always">
            <dx-sortable
                    class="sortable-lists"
                    itemOrientation="horizontal"
                    handle=".list-title"
                    (onReorder)="onListReorder($event)">
                <div class="list" *ngFor="let list of lists; let listIndex = index">
                    <!-- header -->
                    <div class="list-header d-flex">
                        <div class="list-title-wrap w-100">
                            <div class="list-title w-100">
                                <span>TODO</span>
                            </div>
                        </div>
                    </div>

                    <div class="list-content-wrapper h-100">
                        <!--            (onInitialized)="onScrollInit($event)"-->
                        <dx-scroll-view class="scrollable-list"
                                        direction="vertical"
                                        [scrollByContent]="false"
                                        [bounceEnabled]="false">
                            <div class="list-content">
                                <dx-sortable
                                        class="sortable-cards"
                                        group="cardsGroup"
                                        [data]="list"
                                        (onDragStart)="onTaskDragStart($event)"
                                        (onReorder)="onTaskDrop($event)"
                                        (onAdd)="onTaskDrop($event)">
                                    <div class="card-item dx-card dx-theme-text-color dx-theme-background-color" *ngFor="let task of list">
                                        <div class="task-container">
                                            <div class="task-title">
                                                <span>{{ task.name }}</span>
                                            </div>

                                            <div class="edit-btn">
                                                <span class="edit-btn-icon font-icon">
                                                    <i class="fas fa-pencil-alt"></i>
                                                </span>
                                            </div>

                                            <div class="due-date">
                                                <span class="font-icon">
                                                    <i class="far fa-clock"></i>
                                                </span>
                                                <span>{{ task.dueDate }}</span>
                                            </div>

                                            <div class="list-count">
                                                <div class="d-flex">
                                                    <span *ngIf="task.totalAttachments > 0">
                                                        <i class="fas fa-paperclip"></i>
                                                        <span>{{ task.totalAttachments }}</span>
                                                    </span>

                                                    <span *ngIf="task.totalComments > 0">
                                                        <i class="fas fa-paperclip"></i>
                                                        <span>{{ task.totalComments }}</span>
                                                    </span>

                                                    <span *ngIf="task.totalChecklistItem > 0">
                                                        <i [ngClass]="task.progressIsDone ? 'far fa-check-square' : 'far fa-square'"></i>&nbsp;
                                                        <span>{{task.totalChecklistItemIsCompleted}} / {{ task.totalChecklistItem }}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </dx-sortable>
                            </div>
                        </dx-scroll-view>
                    </div>
                </div>
            </dx-sortable>
        </dx-scroll-view>

    </div>
</div>